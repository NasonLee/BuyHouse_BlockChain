// 用來 log 於 底部
function log(input) {
	if (typeof input === 'object')
		$('#log').text($('#log').text() + JSON.stringify(input, null, 2) + '\n')
	else
		$('#log').text($('#log').text() + input + '\n')
}

// 當頁面載入完成時
$(function() {
	// 連結 enode
	var web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'))
	var eth = web3.eth

	//ABI
	var buyhouseContract = web3.eth.contract([{"constant":false,"inputs":[{"name":"houseaddress","type":"string"}],"name":"setOwner_houseaddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getBuyer_houseaddress","outputs":[{"name":"houseaddress","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"ethaddress","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOwnerName","outputs":[{"name":"name","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getHouseNumberOfSalas","outputs":[{"name":"number","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"number","type":"uint256"}],"name":"setHouseNumberOfSalas","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"price","type":"uint256"}],"name":"setHousePrice","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"name","type":"string"}],"name":"setOwnerName","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOwner_houseaddress","outputs":[{"name":"houseaddress","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"number","type":"uint256"}],"name":"setHouseNumberOfRooms","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getHouseAge","outputs":[{"name":"houseage","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOwner_nationID","outputs":[{"name":"ID","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOwner_Telnumber","outputs":[{"name":"tel","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getBuyer_nationID","outputs":[{"name":"ID","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"houseage","type":"uint256"}],"name":"setHouseAge","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getHouseaddress","outputs":[{"name":"houseaddress","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"ID","type":"uint256"}],"name":"setOwner_nationID","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"name","type":"string"}],"name":"setBuyerName","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getHouseNumberOfRooms","outputs":[{"name":"number","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOwner","outputs":[{"name":"ethaddress","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"transfer","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"houseaddress","type":"string"}],"name":"setBuyer_houseaddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getBuyer_Telnumber","outputs":[{"name":"tel","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"tel","type":"string"}],"name":"setOwner_Telnumber","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"balance","type":"uint256"}],"name":"setBuyerbalance","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOwnerbalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getHousePrice","outputs":[{"name":"price","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"number","type":"uint256"}],"name":"setHouseNumberOfBathrooms","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"ID","type":"uint256"}],"name":"setBuyer_nationID","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getHouseNumberOfBathrooms","outputs":[{"name":"number","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"tel","type":"string"}],"name":"setBuyer_Telnumber","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"houseaddress","type":"string"}],"name":"setHouseaddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getBuyerbalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"balance","type":"uint256"}],"name":"setOwnerbalance","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getBuyerName","outputs":[{"name":"name","type":"string"}],"payable":false,"type":"function"},{"inputs":[],"type":"constructor","payable":true},{"anonymous":false,"inputs":[{"indexed":false,"name":"houseaddress","type":"string"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"houseage","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"sethouseAgeEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"number","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"sethouseNumberOfRoomsEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"number","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"sethouseNumberOfSalasEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"number","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"sethouseNumberOfBathroomsEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"price","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setPrice_etherValueEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ethaddress","type":"address"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setOwnerEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setBuyerbalanceEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setOwnerbalanceEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"houseaddress","type":"string"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setBuyer_houseaddressEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"houseaddress","type":"string"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setOwner_houseaddressEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ID","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setBuyer_nationIDEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ID","type":"uint256"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setOwner_nationIDEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"name","type":"string"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setBuyerNameEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"name","type":"string"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setOwnerNameEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"tel","type":"string"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setBuyer_TelnumberEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"tel","type":"string"},{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"setOwner_TelnumberEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"from","type":"address"},{"indexed":false,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":false,"name":"timestamp","type":"uint256"}],"name":"TransferEvent","type":"event"}]);
var buyhouse = buyhouseContract.new(
   {
     from: web3.eth.accounts[0], 
     data: '0x60606040525b33600860006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b611f9f8061003f6000396000f3606060405236156101b3576000357c010000000000000000000000000000000000000000000000000000000090048063026db8d8146101b85780630c20ce121461021357806313af403514610293578063145ef6e9146102b05780631cdb6ed2146103305780632501b82b1461035857806326b46dd114610375578063295795e21461039257806330fd77f9146103ed578063322fab1c1461046d57806334b6bdbe1461048a57806347f1c9f6146104b2578063518a0269146104da5780635384392d1461055a5780635db3b4bc146105825780636d72a20d1461059f5780636d7d02d01461061f5780637975417c1461063c578063828ea0ee14610697578063893d20e8146106bf5780638a4068dd146106fd5780639163cc5914610711578063a089ae1c1461076c578063a32ce68f146107ec578063a8a83eef14610847578063aae3aa8c14610864578063bb4963221461088c578063c2a80ef7146108b4578063cbbf2921146108d1578063cf2e0897146108ee578063deb6e18514610916578063e473299314610971578063edb34db8146109cc578063f34961cd146109f4578063ff6508df14610a11576101b3565b610002565b34610002576102116004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091905050610a91565b005b34610002576102256004805050610bf7565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156102855780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610002576102ae6004808035906020019091905050610cb3565b005b34610002576102c26004805050610d55565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156103225780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610002576103426004805050610e11565b6040518082815260200191505060405180910390f35b34610002576103736004808035906020019091905050610e23565b005b34610002576103906004808035906020019091905050610e8e565b005b34610002576103eb6004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091905050610ef9565b005b34610002576103ff600480505061105f565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f16801561045f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3461000257610488600480803590602001909190505061111b565b005b346100025761049c6004805050611186565b6040518082815260200191505060405180910390f35b34610002576104c46004805050611198565b6040518082815260200191505060405180910390f35b34610002576104ec60048050506111aa565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f16801561054c5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b346100025761056c6004805050611266565b6040518082815260200191505060405180910390f35b346100025761059d6004808035906020019091905050611278565b005b34610002576105b160048050506112e3565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156106115780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b346100025761063a600480803590602001909190505061139f565b005b34610002576106956004808035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505090909190505061140a565b005b34610002576106a96004805050611570565b6040518082815260200191505060405180910390f35b34610002576106d16004805050611582565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b346100025761070f60048050506115b1565b005b346100025761076a6004808035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505090909190505061169b565b005b346100025761077e6004805050611801565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156107de5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610002576108456004808035906020019082018035906020019191908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509090919050506118bd565b005b34610002576108626004808035906020019091905050611ad8565b005b34610002576108766004805050611b43565b6040518082815260200191505060405180910390f35b346100025761089e6004805050611b55565b6040518082815260200191505060405180910390f35b34610002576108cf6004808035906020019091905050611b67565b005b34610002576108ec6004808035906020019091905050611bd2565b005b34610002576109006004805050611c3d565b6040518082815260200191505060405180910390f35b346100025761096f6004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091905050611c4f565b005b34610002576109ca6004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091905050611db5565b005b34610002576109de6004805050611e66565b6040518082815260200191505060405180910390f35b3461000257610a0f6004808035906020019091905050611e78565b005b3461000257610a236004805050611ee3565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f168015610a835780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80600c6000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610ae057805160ff1916838001178555610b11565b82800160010185558215610b11579182015b82811115610b10578251826000505591602001919060010190610af2565b5b509050610b3c9190610b1e565b80821115610b385760008181506000905550600101610b1e565b5090565b50507f4369a9e37095111e0d55c030ccdb0a526978b14231e093bea9afa7762203b0f681334260405180806020018473ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f168015610be45780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b6020604051908101604052806000815260200150600b6000508054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ca45780601f10610c7957610100808354040283529160200191610ca4565b820191906000526020600020905b815481529060010190602001808311610c8757829003601f168201915b50505050509050610cb0565b90565b80600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055507fc3d744c23b491b821c56c5bcb9c8ef11219fab6b4b21238f731d3997eb9fedf9813342604051808473ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b602060405190810160405280600081526020015060106000508054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610e025780601f10610dd757610100808354040283529160200191610e02565b820191906000526020600020905b815481529060010190602001808311610de557829003601f168201915b50505050509050610e0e565b90565b60006002600050549050610e20565b90565b806002600050819055507ff7482934b91720956e09c90f7a4fb5526e69a261c5c3fb7309798d8d535c7a96813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b806004600050819055507fb8e04334961162323fd49a201a89295af0ec92ee9de2f3a9e65a629072807c7f813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b8060106000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610f4857805160ff1916838001178555610f79565b82800160010185558215610f79579182015b82811115610f78578251826000505591602001919060010190610f5a565b5b509050610fa49190610f86565b80821115610fa05760008181506000905550600101610f86565b5090565b50507f864ad42cf31fd9548bf1753645364c155b7d70c687394690f7009b0c0c05885881334260405180806020018473ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f16801561104c5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b6020604051908101604052806000815260200150600c6000508054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561110c5780601f106110e15761010080835404028352916020019161110c565b820191906000526020600020905b8154815290600101906020018083116110ef57829003601f168201915b50505050509050611118565b90565b806001600050819055507f339b4aa82f39a2bbe9c4cd5c4b0cc31379b9a8a229642f4d90d2066432b85ef2813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b60006006600050549050611195565b90565b6000600e6000505490506111a7565b90565b602060405190810160405280600081526020015060126000508054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156112575780601f1061122c57610100808354040283529160200191611257565b820191906000526020600020905b81548152906001019060200180831161123a57829003601f168201915b50505050509050611263565b90565b6000600d600050549050611275565b90565b806006600050819055507f64b1509df626283298e897b11daa62c29b286c1770bae7095ce80219de5e9685813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b602060405190810160405280600081526020015060006000508054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156113905780601f1061136557610100808354040283529160200191611390565b820191906000526020600020905b81548152906001019060200180831161137357829003601f168201915b5050505050905061139c565b90565b80600e600050819055507f8a66b62f3af68928262c5c8b673e3af7fac23baaa8e873d2d732a7a008f074d7813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b80600f6000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061145957805160ff191683800117855561148a565b8280016001018555821561148a579182015b8281111561148957825182600050559160200191906001019061146b565b5b5090506114b59190611497565b808211156114b15760008181506000905550600101611497565b5090565b50507f2dee3b0d329917b4344475e003a447d98fa57ed949f5afce625cbb232277139181334260405180806020018473ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f16801561155d5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b6000600160005054905061157f565b90565b6000600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690506115ae565b90565b60046000505460096000505410156115c857610002565b6004600050546009600082828250540392505081905550600460005054600a6000828282505401925050819055507fbabc8cd3bd6701ee99131f374fd2ab4ea66f48dc4e4182ed78fecb0502e44dd633600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1660046000505442604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff16815260200183815260200182815260200194505050505060405180910390a15b565b80600b6000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106116ea57805160ff191683800117855561171b565b8280016001018555821561171b579182015b8281111561171a5782518260005055916020019190600101906116fc565b5b5090506117469190611728565b808211156117425760008181506000905550600101611728565b5090565b50507f4c6cae0fa2222f16cf36e0395ee9c821978f9aa842678310ea626b84932efea581334260405180806020018473ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156117ee5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b602060405190810160405280600081526020015060116000508054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156118ae5780601f10611883576101008083540402835291602001916118ae565b820191906000526020600020905b81548152906001019060200180831161189157829003601f168201915b505050505090506118ba565b90565b8060126000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061190c57805160ff191683800117855561193d565b8280016001018555821561193d579182015b8281111561193c57825182600050559160200191906001019061191e565b5b509050611968919061194a565b80821115611964576000818150600090555060010161194a565b5090565b50507f12e1fd421dd4e0e10ce4c04ebea5c530bc58d56f7a0acbc5438d352b2800e23881334260405180806020018473ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f168015611a105780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a17f45a8f3d571ce467df12062b44c9fcdbe4f525295c032cfe082c0a000a6beefdf81334260405180806020018473ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f168015611ac55780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b806009600050819055507f2ccf7087a8aabe2100cfba4e715536f2be295ee981b72268ce7b9123aeea1d77813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b6000600a600050549050611b52565b90565b60006004600050549050611b64565b90565b806003600050819055507f397c29d5b1a7f1c0007ca32c5d76501f272c460d2bbfcc461ecd8d6af40eb1d9813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b80600d600050819055507fae5bf44ab483f1bfce4c01d95251a941cbfa5a4bc3227c0f831587bb80298da8813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b60006003600050549050611c4c565b90565b8060116000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10611c9e57805160ff1916838001178555611ccf565b82800160010185558215611ccf579182015b82811115611cce578251826000505591602001919060010190611cb0565b5b509050611cfa9190611cdc565b80821115611cf65760008181506000905550600101611cdc565b5090565b50507f29257d3c835b6d45dfe04f16e7993872972624b60d5ff3aae36345eb62f5351e81334260405180806020018473ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f168015611da25780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b8060006000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10611e0457805160ff1916838001178555611e35565b82800160010185558215611e35579182015b82811115611e34578251826000505591602001919060010190611e16565b5b509050611e609190611e42565b80821115611e5c5760008181506000905550600101611e42565b5090565b50505b50565b60006009600050549050611e75565b90565b80600a600050819055507f4ab8c59b4f4a655a41cffe0b021f2564a54425251f8e1c6c94b9cda616317c06813342604051808481526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a15b50565b6020604051908101604052806000815260200150600f6000508054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611f905780601f10611f6557610100808354040283529160200191611f90565b820191906000526020600020905b815481529060010190602001808311611f7357829003601f168201915b50505050509050611f9c565b9056', 
     gas: '4700000'
   }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
 
		// 載入我們設計的介面接合
			contractControl(buyhouse, eth)
		}
	})

})

// 這裡將控制 simplestorage 與 網頁介面的接合，無論是事件處理還是輸入互動
function contractControl(buyhouse, eth) {
	// 當 simplgestorage 的 setEvent 被發射的時候，就會被如此接住
	buyhouse.setEvent({}, function(err, eventdata) {
		log('setEvent fired : ')
		log(eventdata)
	})
	buyhouse.TransferEvent({}, function (err, event) {
		log('Transfer Finish!')
		log(event)
		})

	// 當有人按下 setData 的按鈕時
	$('#setData').on('click', function() {
		// 得到 input 的值後，並送出 setData 的 Transaction (因為這是一個改變資料庫的行為)
		// 記得補上 TxObject (from 的這塊物件)
		// 然後得到 此 Transaction 的 hash
		var txHash = buyhouse.setHouseaddress($('#house_Address').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setHouseNumberOfRooms($('#numberOfRooms').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash =	buyhouse.setHouseNumberOfSalas($('#numberOfSalas').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = 	buyhouse.setHouseNumberOfBathrooms($('#numberOfBathrooms').val(), 			{
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash =	buyhouse.setHousePrice($('#house_Price').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setHouseAge($('#house_Age').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setOwner($('#Owner_ethe_Address').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setBuyerbalance($('#Buyer_balance').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setOwnerbalance($('#Owner_balance').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setBuyer_houseaddress($('#Buyer_residential_Address').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setOwner_houseaddress($('#Owner_residential_Address').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setBuyer_nationID($('#Buyer_national_id').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setOwner_nationID($('#Owner_national_id').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setBuyerName($('#BuyerName').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setOwnerName($('#OwnerName').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setBuyer_Telnumber($('#Buyer_tel_Number').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		var txHash = buyhouse.setOwner_Telnumber($('#Owner_tel_Number').val(), {
			from: eth.coinbase
		})
		log('txHash is : ' + txHash)
		
		
	})
	// 當有人按下 getData 的按鈕時
	$('#getData').on('click', function() {
		// getData 為 contract function
		// 所以不需要 Transaction 只需要 Call
		// 可以馬上得到結果
		log('Getdata')
		var data = buyhouse.getHouseaddress();
		log('HouseAddress: '+data)
		
		var data = buyhouse.getHouseNumberOfRooms();
		log('HouseNumberOfRooms: '+data)
		
		var data = buyhouse.getHouseNumberOfSalas();
		log('HouseNumberOfSalas: '+data)
		
		var data = buyhouse.getHouseNumberOfBathrooms();
		log('HouseNumberOfBathrooms: '+data)
		
		var data = buyhouse.getHousePrice();
		log('HousePrice: '+data)
		
		var data = buyhouse.getHouseAge();
		log('HouseAge: '+data)
		
		var data = buyhouse.getOwner();
		log('Owner: '+data)
		
		var data = buyhouse.getBuyerbalance();
		log('Buyerbalance: '+data)
		
		var data = buyhouse.getOwnerbalance();
		log('Ownerbalance: '+data)
		
		var data = buyhouse.getBuyer_houseaddress();
		log('Buyer_houseaddress: '+data)
		
		var data = buyhouse.getOwner_houseaddress();
		log('Owner_houseaddress: '+data)
		
		var data = buyhouse.getBuyer_nationID();
		log('Buyer_nationID: '+data)
		
		var data = buyhouse.getOwner_nationID();
		log('Owner_nationID: '+data)
		
		var data = buyhouse.getBuyerName();
		log('BuyerName: '+data)
		
		var data = buyhouse.getOwnerName();
		log('OwnerName: '+data)
		
		var data = buyhouse.getBuyer_Telnumber();
		log('Buyer_Telnumber: '+data)
		
		var data = buyhouse.getOwner_Telnumber();
		log('Owner_Telnumber: '+data)
		
	})
	
	$('#transfer').on('click', function() {
		
		log('轉帳中')
		var txHash = buyhouse.transfer( {
			from: eth.coinbase
		})
		log('txHash: '+ txHash)
		
	})
	$('#getbalance').on('click', function() {
		var data = buyhouse.getBuyerbalance();
		log('Buyerbalance: '+data)
		
		var data = buyhouse.getOwnerbalance();
		log('Ownerbalance: '+data)
	})
	
}